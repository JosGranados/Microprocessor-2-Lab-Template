<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microprocessor 2 Labs: Lab 6 GPIO, Interrupts, and Queues</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../microprocessor_2_template.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../university_of_texas_at_el_paso_logo-2.png"/></td>
  <td id="projectalign">
   <div id="projectname">Microprocessor 2 Labs<span id="projectnumber">&#160;v2.0</span>
   </div>
   <div id="projectbrief">Microprocessor 2 Lab Documenation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<head>
  <html> 
  <head>
      <!-- ... other metadata & script includes ... -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript">
          DoxygenAwesomeDarkModeToggle.init()
      </script>
  </head>
  <body>
<html>
  <head>
      <!-- ... other metadata & script includes ... -->
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript">
          DoxygenAwesomeFragmentCopyButton.init()
      </script>
  </head>
  <body>
<html>
    <head>
      <a href="https://github.com/jminjares4/Microprocessor-2-Lab-Template" class="github-corner" title="View source on GitHub" target="_blank">
        <svg viewBox="0 0 250 250" width="50" height="50" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    </head>
    <body>
  <!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/d2a/md_doc_pages_lab6.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Lab 6 GPIO, Interrupts, and Queues </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md78"></a>
Objective</h1>
<ul>
<li>Understand how to use queues and interrupts with <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/freertos.html#queue-api"><code>FreeRTOS Queues</code></a>. In this lab, students will learn how to send data between tasks using interrupts. Student must create a program that uses <code>gpio</code> interrupts as in Lab 2, please feel free to use either configuration (Pull-up | Pull-down). The interrupt service routine (ISR) should send data (gpio pin number) to a queue and be receive by task: <code>print_task</code>. The <code>print_task</code> must receive the data and display it. For instance, if the interrupt was trigger by pin <b>23</b>, the output would be: "GPIO 23 received!!!".</li>
</ul>
<div align="center"> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Task   </th><th class="markdownTableHeadLeft">Objective    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">print_task   </td><td class="markdownTableBodyLeft">Receive data and print to terminal/monitor   </td></tr>
</table>
<br  />
 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Interrupt   </th><th class="markdownTableHeadLeft">Objective    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">gpio_isr   </td><td class="markdownTableBodyLeft">Send data to <code>print_task</code>   </td></tr>
</table>
</div><h1><a class="anchor" id="autotoc_md79"></a>
Bonus</h1>
<ul>
<li><em><b>Undergrad Bonus</b></em><ul>
<li>Modify code to use <b>2</b> more <code>interrupts</code>.</li>
</ul>
</li>
<li><em><b>Grad Bonus</b></em><ul>
<li>Modify code to use <b>2</b> more <code>interrupts</code> and add <b>2</b> LEDs. Each interrupt must <code>toggle</code> its corresponding LED.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md80"></a>
ESP32 Pinout</h1>
<div class="fragment"><div class="line">                                        +-----------------------+</div>
<div class="line">                                        | O      | USB |      O |</div>
<div class="line">                                        |        -------        |</div>
<div class="line">                                    3V3 | [ ]               [ ] | VIN</div>
<div class="line">                                    GND | [ ]               [ ] | GND</div>
<div class="line">    Touch3 / HSPI_CS0 / ADC2_3 / GPIO15 | [ ]               [ ] | GPIO13 / ADC2_4 / HSPI_ID / Touch4</div>
<div class="line">CS / Touch2 / HSPI_WP / ADC2_2 /  GPIO2 | [ ]               [ ] | GPIO12 / ADC2_5 / HSPI_Q / Touch5</div>
<div class="line">     Touch0 / HSPI_HD / ADC2_0 /  GPIO4 | [ ]               [ ] | GPIO14 / ADC2_6 / HSPI_CLK / Touch6</div>
<div class="line">                        U2_RXD / GPIO16 | [ ]               [ ] | GPIO27 / ADC2_7 / Touch7</div>
<div class="line">                        U2_TXD / GPIO17 | [ ]               [ ] | GPIO26 / ADC2_9 / DAC2</div>
<div class="line">                     V_SPI_CS0 /  GPIO5 | [ ]  ___________  [ ] | GPIO25 / ADC2_8 / DAC1</div>
<div class="line">               SCK / V_SPI_CLK / GPIO18 | [ ] |           | [ ] | GPIO33 / ADC1_5 / Touch8 / XTAL32</div>
<div class="line">       U0_CTS / MSIO / V_SPI_Q / GPIO19 | [ ] |           | [ ] | GPIO32 / ADC1_4 / Touch9 / XTAL32</div>
<div class="line">                SDA / V_SPI_HD / GPIO21 | [ ] |           | [ ] | GPIO35 / ADC1_7 </div>
<div class="line">                 CLK2 / U0_RXD /  GPIO3 | [ ] |           | [ ] | GPIO34 / ADC1_6 </div>
<div class="line">                 CLK3 / U0_TXD /  GPIO1 | [ ] |           | [ ] | GPIO39 / ADC1_3 / SensVN </div>
<div class="line">       SCL / U0_RTS / V_SPI_WP / GPIO22 | [ ] |           | [ ] | GPIO36 / ADC1_0 / SensVP </div>
<div class="line">               MOSI / V_SPI_WP / GPIO23 | [ ] |___________| [ ] | EN </div>
<div class="line">                                        |                       |</div>
<div class="line">                                        |  |  |  ____  ____  |  |</div>
<div class="line">                                        |  |  |  |  |  |  |  |  |</div>
<div class="line">                                        |  |__|__|  |__|  |__|  |</div>
<div class="line">                                        | O                   O |</div>
<div class="line">                                        +-----------------------+</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md81"></a>
Example</h1>
<p >Here is an example of how to use ESP32 GPIO advance setup. The following code will have an external LED toggling every half second and will toggle the onboard led if the button is pressed. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span> </div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span> </div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ESP_INTR_FLAG_DEFAULT 0 </span><span class="comment">/* Interrupt flag configuration */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define LOW     0   </span><span class="comment">/* low logic  */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define HIGH    1   </span><span class="comment">/* high logic */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ONBOARD_LED     2    </span><span class="comment">/* onboard led pin  */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define EXTERNAL_LED    22   </span><span class="comment">/* external led pin  */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define BUTTON          23   </span><span class="comment">/* button pin  */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> toggle(gpio_num_t pin){</div>
<div class="line">    <span class="comment">/* Get current level and toggle LED */</span></div>
<div class="line">    gpio_get_level(pin) ? gpio_set_level(pin, <a class="code hl_define" href="../../d3/db7/_lab__0_2main_2main_8c.html#ab811d8c6ff3a505312d3276590444289">LOW</a>) : gpio_set_level(pin, <a class="code hl_define" href="../../d3/db7/_lab__0_2main_2main_8c.html#a5bb885982ff66a2e0a0a45a8ee9c35e2">HIGH</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* GPIO interrupt handler */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> IRAM_ATTR gpio_isr_handler(<span class="keywordtype">void</span>* arg) {</div>
<div class="line">    <span class="comment">/* store argument */</span></div>
<div class="line">    gpio_num_t gpio = (gpio_num_t) arg;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* toggle LED */</span></div>
<div class="line">    toggle(gpio);</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* GPIO setup */</span></div>
<div class="line"><span class="keywordtype">void</span> gpio_setup(<span class="keywordtype">void</span>){</div>
<div class="line">    <span class="comment">/* IO configuration */</span></div>
<div class="line">    gpio_config_t io_conf;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Input configuration */</span></div>
<div class="line">    io_conf.intr_type = GPIO_INTR_POSEDGE;  <span class="comment">/* Set up as Positive Edge */</span> </div>
<div class="line">    io_conf.mode = GPIO_MODE_INPUT;     <span class="comment">/* Set pins as input */</span></div>
<div class="line">    io_conf.pin_bit_mask = (1ULL &lt;&lt; BUTTON);  <span class="comment">/* Add input bit mask */</span></div>
<div class="line">    io_conf.pull_down_en = 1;   <span class="comment">/* Enable pulldown */</span></div>
<div class="line">    io_conf.pull_up_en = 0;     <span class="comment">/* Disable pullup */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set configuration */</span></div>
<div class="line">    gpio_config(&amp;io_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Output configuration */</span></div>
<div class="line">    io_conf.intr_type = GPIO_INTR_DISABLE;  <span class="comment">/* Disable interrupt */</span></div>
<div class="line">    io_conf.mode = GPIO_MODE_OUTPUT;        <span class="comment">/* Set as output*/</span></div>
<div class="line">    io_conf.pin_bit_mask = (1ULL &lt;&lt; <a class="code hl_define" href="../../d2/d6b/_lab__2_2main_2main_8c.html#a547f7691f0e83d2e9fd22bf5b3c08b0a">ONBOARD_LED</a>) | (1ULL &lt;&lt; EXTERNAL_LED); <span class="comment">/* Add output bit mask */</span></div>
<div class="line">    io_conf.pull_down_en = 0;   <span class="comment">/* Disable pulldown */</span></div>
<div class="line">    io_conf.pull_up_en = 0;     <span class="comment">/* Disable pullup */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set configuration */</span></div>
<div class="line">    gpio_config(&amp;io_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set default interrupt flag */</span></div>
<div class="line">    gpio_install_isr_service(<a class="code hl_define" href="../../d2/d6b/_lab__2_2main_2main_8c.html#af8baf7d9859733667317e58c0ff707d1">ESP_INTR_FLAG_DEFAULT</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Add ISR handler */</span></div>
<div class="line">    gpio_isr_handler_add(BUTTON, gpio_isr_handler, (<span class="keywordtype">void</span>*) BUTTON); </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/d74/_additional___labs_2_lab__10_2main_8c.html#abce06be17fc37d675118a678a8100a36">app_main</a>() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup the GPIOs */</span></div>
<div class="line">    gpio_setup();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(1){</div>
<div class="line">         toggle(EXTERNAL_LED); <span class="comment">/* Toggle external led */</span></div>
<div class="line">         vTaskDelay(500/portTICK_PERIOD_MS); <span class="comment">/* .5 second delay */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="a_additional___labs_2_lab__10_2main_8c_html_abce06be17fc37d675118a678a8100a36"><div class="ttname"><a href="../../dd/d74/_additional___labs_2_lab__10_2main_8c.html#abce06be17fc37d675118a678a8100a36">app_main</a></div><div class="ttdeci">void app_main()</div><div class="ttdef"><b>Definition:</b> main.c:316</div></div>
<div class="ttc" id="a_lab__0_2main_2main_8c_html_a5bb885982ff66a2e0a0a45a8ee9c35e2"><div class="ttname"><a href="../../d3/db7/_lab__0_2main_2main_8c.html#a5bb885982ff66a2e0a0a45a8ee9c35e2">HIGH</a></div><div class="ttdeci">#define HIGH</div><div class="ttdef"><b>Definition:</b> main.c:28</div></div>
<div class="ttc" id="a_lab__0_2main_2main_8c_html_ab811d8c6ff3a505312d3276590444289"><div class="ttname"><a href="../../d3/db7/_lab__0_2main_2main_8c.html#ab811d8c6ff3a505312d3276590444289">LOW</a></div><div class="ttdeci">#define LOW</div><div class="ttdef"><b>Definition:</b> main.c:27</div></div>
<div class="ttc" id="a_lab__2_2main_2main_8c_html_a547f7691f0e83d2e9fd22bf5b3c08b0a"><div class="ttname"><a href="../../d2/d6b/_lab__2_2main_2main_8c.html#a547f7691f0e83d2e9fd22bf5b3c08b0a">ONBOARD_LED</a></div><div class="ttdeci">#define ONBOARD_LED</div><div class="ttdef"><b>Definition:</b> main.c:30</div></div>
<div class="ttc" id="a_lab__2_2main_2main_8c_html_af8baf7d9859733667317e58c0ff707d1"><div class="ttname"><a href="../../d2/d6b/_lab__2_2main_2main_8c.html#af8baf7d9859733667317e58c0ff707d1">ESP_INTR_FLAG_DEFAULT</a></div><div class="ttdeci">#define ESP_INTR_FLAG_DEFAULT</div><div class="ttdef"><b>Definition:</b> main.c:28</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md82"></a>
Lab Template</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/queue.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;driver/gpio.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ESP_INTR_FLAG_DEFAULT   0   </span><span class="comment">/* Interrupt flag configuration */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Global Queue handle */</span></div>
<div class="line">QueueHandle_t <a class="code hl_variable" href="../../d2/d61/_lab__5_2main_2main_8c.html#aa78b6121b7586233293fb6cba5e19206">xQueue</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* GPIO interrupt handler */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> IRAM_ATTR gpio_isr_handler(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Print task */</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../d1/d59/_lab__6_2main_2main_8c.html#acb72179382d32fb25e469ceb9ce94fe3">print_task</a>(<span class="keywordtype">void</span> *pvParameters)</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* GPIO interrupt setup */</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../d1/d59/_lab__6_2main_2main_8c.html#aa65bbbc69abcc3192dc3005bf0ca26c5">gpio_interrupt_setup</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../dd/d74/_additional___labs_2_lab__10_2main_8c.html#abce06be17fc37d675118a678a8100a36">app_main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Create a queue */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Call gpio interrupt setup */</span></div>
<div class="line">    <a class="code hl_function" href="../../d1/d59/_lab__6_2main_2main_8c.html#aa65bbbc69abcc3192dc3005bf0ca26c5">gpio_interrupt_setup</a>(); </div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create task */</span></div>
<div class="line">    xTaskCreate(&amp;<a class="code hl_function" href="../../d1/d59/_lab__6_2main_2main_8c.html#acb72179382d32fb25e469ceb9ce94fe3">print_task</a>, <span class="stringliteral">&quot;print_task&quot;</span>, 2048, NULL, 10, NULL); </div>
<div class="line">    </div>
<div class="line">}</div>
<div class="ttc" id="a_lab__5_2main_2main_8c_html_aa78b6121b7586233293fb6cba5e19206"><div class="ttname"><a href="../../d2/d61/_lab__5_2main_2main_8c.html#aa78b6121b7586233293fb6cba5e19206">xQueue</a></div><div class="ttdeci">QueueHandle_t xQueue</div><div class="ttdef"><b>Definition:</b> main.c:72</div></div>
<div class="ttc" id="a_lab__6_2main_2main_8c_html_aa65bbbc69abcc3192dc3005bf0ca26c5"><div class="ttname"><a href="../../d1/d59/_lab__6_2main_2main_8c.html#aa65bbbc69abcc3192dc3005bf0ca26c5">gpio_interrupt_setup</a></div><div class="ttdeci">void gpio_interrupt_setup(void)</div><div class="ttdef"><b>Definition:</b> main.c:59</div></div>
<div class="ttc" id="a_lab__6_2main_2main_8c_html_acb72179382d32fb25e469ceb9ce94fe3"><div class="ttname"><a href="../../d1/d59/_lab__6_2main_2main_8c.html#acb72179382d32fb25e469ceb9ce94fe3">print_task</a></div><div class="ttdeci">void print_task(void *pvParameters)</div><div class="ttdef"><b>Definition:</b> main.c:53</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md83"></a>
C helpful functions</h1>
<p >We have use queues in the previous lab to send data from one task to another. However, in this lab we need to send data from an interrupt to a task. Therefore, a special function is needed to send data to the queue: <b><code>xQueueSendFromISR()</code></b>. Similar to the previous lab functions that we have use to send data in a queue, <code>xQueueSendFromISR</code> is similar with a different parameter. To keep it simple, please set <code>BaseType_t *pxHigherPriorityTaskWoken</code> parameter set to <em><code>NULL</code></em>. </p><div class="fragment"><div class="line">BaseType_t xQueueSendFromISR(</div>
<div class="line">                               QueueHandle_t <a class="code hl_variable" href="../../d2/d61/_lab__5_2main_2main_8c.html#aa78b6121b7586233293fb6cba5e19206">xQueue</a>,</div>
<div class="line">                               <span class="keyword">const</span> <span class="keywordtype">void</span> *pvItemToQueue,</div>
<div class="line">                               BaseType_t *pxHigher PriorityTaskWoken</div>
<div class="line">                            );</div>
</div><!-- fragment --><p >For more information of how to use <a class="el" href="../../d1/d00/md_doc_pages_lab5.html">Queues</a> and <a class="el" href="../../de/d6a/md_doc_pages_lab2.html">Interrupts</a>, please see previous labs.</p>
<h1><a class="anchor" id="autotoc_md84"></a>
Pull-up and Pull-down Configuration</h1>
<p ><img src="../../button_config.png" alt="button configuation" width="413" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md85"></a>
Additional Links</h1>
<ul>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/gpio.html#">Espressif GPIO Driver API</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/freertos.html#queue-api">FreeRTOS Queue</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/freertos.html">FreeRTOS Espressif Documenation</a></li>
<li><a href="https://www.freertos.org/a00125.html">FreeRTOS Documenation</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md86"></a>
Authors</h1>
<ul>
<li><a href="https://github.com/jminjares4"><b>Jesus Minjares</b></a><ul>
<li><b>Master of Science in Computer Engineering</b> <br  />
 <a href="https://www.linkedin.com/in/jesusminjares/"><img src="https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&amp;logo=linkedin&amp;logoColor=white&amp;style=flat" alt="LinkedIn" class="inline"/></a> <a href="https://github.com/jminjares4"><img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&amp;logo=github&amp;logoColor=white&amp;style=flat" alt="GitHub" class="inline"/></a></li>
</ul>
</li>
<li><a href="https://github.com/eabaca2419"><b>Erick Baca</b></a><ul>
<li><b>Master of Science in Computer Engineering</b> <br  />
 <a href="https://www.linkedin.com/in/erick-baca/"><img src="https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&amp;logo=linkedin&amp;logoColor=white&amp;style=flat" alt="LinkedIn" class="inline"/></a> <a href="https://github.com/eabaca2419"><img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&amp;logo=github&amp;logoColor=white&amp;style=flat" alt="GitHub" class="inline"/></a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md87"></a>
GitHub</h1>
<div align="left"> <a href="https://github.com/jminjares4/Microprocessor-2-Lab-Template/tree/main/Lab_6"><img src="../../github.png" alt="" class="inline"/> </a> <a href="https://github.com/jminjares4/Microprocessor-2-Lab-Template/tree/main/Lab_6">Lab 6 Repository</a> </div><p ><span class="next_section_button"> Read Next: <a class="el" href="../../d0/d10/md_doc_pages_lab7.html">Lab 7</a> </span> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="footer"><a href="https://github.com/jminjares4/Microprocessor-2-Lab-Template"><img class="footer" src="../../university_of_texas_at_el_paso_logo.png" width="104" height="31" alt="doxygen"/></a> v2.0 </li>
    </ul>
  </div>
  </body>
  </html>
  